# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

## üéØ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∏—Ç–æ:

### 1. ‚úÖ –§–∏–∫—Å—Ç—É—Ä–∞ ensure_events_table
- **–°—Ç–∞—Ç—É—Å**: –£–∂–µ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–§–∞–π–ª**: `tests/conftest.py` (—Å—Ç—Ä–æ–∫–∏ 18-35)
- **–§—É–Ω–∫—Ü–∏—è**: –°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É `events` –≤ —Ä–µ–∂–∏–º–µ `FULL_TESTS=1`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –§–∏–∫—Å—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 2. ‚úÖ –ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ 5 –∫–º
- **–°—Ç–∞—Ç—É—Å**: –î–æ–±–∞–≤–ª–µ–Ω
- **–§–∞–π–ª**: `tests/test_events_nearby.py::test_nearby_exact_5km_boundary`
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ —Ä–æ–≤–Ω–æ –Ω–∞ 5 –∫–º –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–õ–æ–≥–∏–∫–∞**: –°–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 4.9-5.1 –∫–º

### 3. ‚úÖ Smoke —Ç–µ—Å—Ç –Ω–∞ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–°—Ç–∞—Ç—É—Å**: –î–æ–±–∞–≤–ª–µ–Ω
- **–§–∞–π–ª**: `tests/test_events_nearby.py::test_nearby_empty_result`
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–æ–≥–¥–∞ –≤ —Ä–∞–¥–∏—É—Å–µ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∏ –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

### 4. ‚úÖ Pre-commit —Å ruff
- **–°—Ç–∞—Ç—É—Å**: –£–∂–µ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —É–ª—É—á—à–µ–Ω
- **–§–∞–π–ª**: `.pre-commit-config.yaml`
- **–•—É–∫–∏**: 
  - `ruff` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  - `ruff-format` (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**: –î–æ–±–∞–≤–ª–µ–Ω –≤ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Ö—É–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤ –≤ test_events_nearby.py: 6
- test_nearby_returns_seeded_event
- test_nearby_filters_by_radius  
- test_nearby_returns_distance_km
- test_nearby_pagination
- test_nearby_exact_5km_boundary  # ‚úÖ –ù–û–í–´–ô
- test_nearby_empty_result        # ‚úÖ –ù–û–í–´–ô
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –õ—ë–≥–∫–∏–π CI (—Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è)
pytest -m "api or db"

# –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º (—Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è)
FULL_TESTS=1 pytest -m "api or db"

# Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∞
pre-commit run --all-files

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
FULL_TESTS=1 pytest tests/test_events_nearby.py::test_nearby_empty_result -v
```

## üí° –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ú–∞—Ä–∫–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤**: `api`, `db`, `"api or db"`
2. **–õ—ë–≥–∫–∏–π CI**: –ë–µ–∑ `FULL_TESTS` —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
3. **–ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º**: –° `FULL_TESTS=1` —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
4. **Pre-commit**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
5. **–§–∏–∫—Å—Ç—É—Ä—ã**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–∑–¥–∞—é—Ç —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î
6. **–ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**: –¢–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –≥—Ä–∞–Ω–∏—Ü—ã –∏ –ø—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±—ã—Å—Ç—Ä–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ! üíñ
