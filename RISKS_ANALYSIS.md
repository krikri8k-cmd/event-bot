# ‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤: —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ "–°–µ–≥–æ–¥–Ω—è/–ó–∞–≤—Ç—Ä–∞"

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ò–°–ö–ò (–º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É)

### 1. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ (`rx:`) - –°–¢–†–û–ö–ê 4490**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Ä–∞–¥–∏—É—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `search_events_today()` –±–µ–∑ `date_offset`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
@main_router.callback_query(F.data.startswith("rx:"))
async def on_radius_expand(callback: types.CallbackQuery):
    # ...
    events = events_service.search_events_today(
        city=region, user_lat=lat, user_lng=lng, radius_km=new_radius
    )
```

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `date_offset`, –∫–æ–¥ —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π
- –ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å `date_offset` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è - –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "—Å–µ–≥–æ–¥–Ω—è"

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü–æ–ª—É—á–∞–µ–º date_filter –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "today")
date_filter = state.get("date_filter", "today")
date_offset = 0 if date_filter == "today" else 1

events = events_service.search_events_today(
    city=region, user_lat=lat, user_lng=lng, 
    radius_km=new_radius, 
    date_offset=date_offset  # –î–û–ë–ê–í–ò–¢–¨
)
```

**–†–∏—Å–∫:** üî¥ –í–´–°–û–ö–ò–ô - –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ —Å–ª–æ–º–∞–µ—Ç—Å—è

---

### 2. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (`pg:`) - –°–¢–†–û–ö–ê 6809**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ `state["prepared"]`, –Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –¥–∞—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
@main_router.callback_query(F.data.startswith("pg:"))
async def on_pagination(callback: types.CallbackQuery):
    state = user_state.get(callback.message.chat.id)
    prepared = state["prepared"]  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    # ...
```

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç –¥–∞—Ç—É, –Ω–æ –ø–æ—Ç–æ–º –Ω–∞–∂–º–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é - –ø–æ–∫–∞–∂–µ—Ç —Å–æ–±—ã—Ç–∏—è —Å—Ç–∞—Ä–æ–π –¥–∞—Ç—ã
- –ö–Ω–æ–ø–∫–∏ "–°–µ–≥–æ–¥–Ω—è/–ó–∞–≤—Ç—Ä–∞" –≤ `kb_pager()` –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å —Ç–µ–∫—É—â–∏–π –≤—ã–±–æ—Ä

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –¥–∞—Ç—ã –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å `state["prepared"]`
- –í `kb_pager()` –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π `date_filter` –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
- –ü—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ–Ω–∏ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)

**–†–∏—Å–∫:** üü° –°–†–ï–î–ù–ò–ô - –Ω—É–∂–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—ã

---

### 3. **–¢–µ—Å—Ç—ã - –°–¢–†–û–ö–ê 23 –≤ test_smoke_core_functionality.py**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç `search_events_today()` –±–µ–∑ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
events = service.search_events_today(
    city="bali", user_lat=-8.674763, user_lng=115.230137, radius_km=15
)
```

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å `date_offset` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º - —Ç–µ—Å—Ç—ã —É–ø–∞–¥—É—Ç
- –ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å –¥–µ—Ñ–æ–ª—Ç–æ–º `0` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥—É—Ç, –Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `date_offset=1`

**–†–µ—à–µ–Ω–∏–µ:**
- –°–¥–µ–ª–∞—Ç—å `date_offset=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `date_offset=1`

**–†–∏—Å–∫:** üü° –°–†–ï–î–ù–ò–ô - —Ç–µ—Å—Ç—ã –º–æ–≥—É—Ç —É–ø–∞—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º

---

### 4. **–í—Ç–æ—Ä–æ–µ –º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `search_events_today()` - –°–¢–†–û–ö–ê 4535**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—â–µ –æ–¥–Ω–æ –º–µ—Å—Ç–æ, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –±–µ–∑ `date_offset`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
events = events_service.search_events_today(
    city=region, user_lat=lat, user_lng=lng, 
    radius_km=new_radius, 
    message_id=f"{callback.message.message_id}"
)
```

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—É–Ω–∫—Ç—É 1 - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `date_offset` –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–†–∏—Å–∫:** üî¥ –í–´–°–û–ö–ò–ô - –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ —Å–ª–æ–º–∞–µ—Ç—Å—è

---

## üü° –°–†–ï–î–ù–ò–ï –†–ò–°–ö–ò (–º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

### 5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è `user_state`**
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ä—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç `date_filter`

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –ø–æ–∏—Å–∫ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `date_filter`
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –¥–∞—Ç—ã –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Ä–∞–¥–∏—É—Å–∞ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å —Å `KeyError`

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .get() —Å –¥–µ—Ñ–æ–ª—Ç–æ–º
date_filter = state.get("date_filter", "today")  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "today"
date_offset = 0 if date_filter == "today" else 1
```

**–†–∏—Å–∫:** üü° –°–†–ï–î–ù–ò–ô - –Ω—É–∂–Ω–æ –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.get()` —Å –¥–µ—Ñ–æ–ª—Ç–æ–º

---

### 6. **–§—É–Ω–∫—Ü–∏—è `kb_pager()` - –°–¢–†–û–ö–ê 1254**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞—Ç—ã, –Ω–æ –Ω–µ —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
def kb_pager(page: int, total: int, current_radius: int = None) -> InlineKeyboardMarkup:
    buttons = [
        [‚óÄÔ∏è –ù–∞–∑–∞–¥, –í–ø–µ—Ä—ë–¥ ‚ñ∂Ô∏è],
        [–°—Ç—Ä. X/Y],
        [üîç –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ X –∫–º],
    ]
```

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫–∏ - –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è UI
- –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å `date_filter` - –∫–Ω–æ–ø–∫–∏ –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
```python
def kb_pager(page: int, total: int, current_radius: int = None, date_filter: str = "today") -> InlineKeyboardMarkup:
    # ...
    # –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞—Ç—ã
    if date_filter == "today":
        buttons.append([
            InlineKeyboardButton(text="üìÖ –°–µ–≥–æ–¥–Ω—è ‚úÖ", callback_data="date_filter:today"),
            InlineKeyboardButton(text="üìÖ –ó–∞–≤—Ç—Ä–∞", callback_data="date_filter:tomorrow"),
        ])
    else:
        buttons.append([
            InlineKeyboardButton(text="üìÖ –°–µ–≥–æ–¥–Ω—è", callback_data="date_filter:today"),
            InlineKeyboardButton(text="üìÖ –ó–∞–≤—Ç—Ä–∞ ‚úÖ", callback_data="date_filter:tomorrow"),
        ])
```

**–†–∏—Å–∫:** üü° –°–†–ï–î–ù–ò–ô - –Ω—É–∂–Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å, –Ω–µ —Å–ª–æ–º–∞–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏

---

### 7. **–§—É–Ω–∫—Ü–∏—è `render_header()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "–Ω–∞ —Å–µ–≥–æ–¥–Ω—è", –Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ "–∑–∞–≤—Ç—Ä–∞" –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `render_header()` –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `date_filter`
- –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É)

**–†–∏—Å–∫:** üü¢ –ù–ò–ó–ö–ò–ô - –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

---

## üü¢ –ù–ò–ó–ö–ò–ï –†–ò–°–ö–ò (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ —Å—Ç–æ–∏—Ç —É—á–µ—Å—Ç—å)

### 8. **–ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è "–ó–∞–≤—Ç—Ä–∞"**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –Ω–µ—Ç, –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" –¥–∞–∂–µ –¥–ª—è –∑–∞–≤—Ç—Ä–∞
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –ø–ª–æ—Ö–æ–π UX

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `date_filter` –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–±—ã—Ç–∏–π
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç: "–Ω–∞ —Å–µ–≥–æ–¥–Ω—è" –∏–ª–∏ "–Ω–∞ –∑–∞–≤—Ç—Ä–∞"

**–†–∏—Å–∫:** üü¢ –ù–ò–ó–ö–ò–ô - –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

---

### 9. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ `/diag_search` - –°–¢–†–û–ö–ê 4000**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–µ—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç–µ

**–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ `date_filter`

**–†–∏—Å–∫:** üü¢ –ù–ò–ó–ö–ò–ô - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (—á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å):
- [ ] –°–¥–µ–ª–∞—Ç—å `date_offset=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `search_events_today()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å `date_offset` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ (`rx:`) - –°–¢–†–û–ö–ê 4490
- [ ] –î–æ–±–∞–≤–∏—Ç—å `date_offset` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ (`rx:`) - –°–¢–†–û–ö–ê 4535
- [ ] –î–æ–±–∞–≤–∏—Ç—å `date_filter` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (–≤–µ–∑–¥–µ, –≥–¥–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `user_state`)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.get("date_filter", "today")` –≤–µ–∑–¥–µ, –≥–¥–µ —á–∏—Ç–∞–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `kb_pager()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–Ω–æ–ø–æ–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞—Ç—ã
- [ ] –°–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `on_date_filter_change()` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—ã

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞):
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ `date_offset=1`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∞—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å `date_filter` –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- [ ] –í—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ —á–∏—Ç–∞–µ—Ç—Å—è `date_filter`, –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.get()` —Å –¥–µ—Ñ–æ–ª—Ç–æ–º `"today"`
- [ ] –í—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `search_events_today()`, –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `date_offset` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç)

---

## ‚úÖ –í–´–í–û–î

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:** 2 –º–µ—Å—Ç–∞ (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `rx:`)
**–°—Ä–µ–¥–Ω–∏–µ —Ä–∏—Å–∫–∏:** 3 –º–µ—Å—Ç–∞ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ç–µ—Å—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
**–ù–∏–∑–∫–∏–µ —Ä–∏—Å–∫–∏:** 2 –º–µ—Å—Ç–∞ (–∫–æ—Å–º–µ—Ç–∏–∫–∞)

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** 
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.get("date_filter", "today")` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `date_offset` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `search_events_today()`
- –°–¥–µ–ª–∞—Ç—å `date_offset=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–ï—Å–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —á–µ–∫–ª–∏—Å—Ç—É - –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è! ‚úÖ**

