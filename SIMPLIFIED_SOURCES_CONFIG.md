# 🎯 Упрощенная конфигурация источников событий

## 📋 Выбранные источники

Мы решили использовать только **3 основных источника** событий:

1. **🌴 BaliForum** - события с форума Бали
2. **🎭 KudaGo** - российские события  
3. **👥 Пользовательские события** - события, созданные пользователями бота

## ⚙️ Настройка конфигурации

### В файле `.env.local` установите:

```bash
# === ВКЛЮЧЕННЫЕ ИСТОЧНИКИ ===
ENABLE_BALIFORUM=1
KUDAGO_ENABLED=true

# === ОТКЛЮЧЕННЫЕ ИСТОЧНИКИ ===
ENABLE_MEETUP_API=0
ENABLE_ICS_FEEDS=0
ENABLE_EVENTBRITE_API=0

# === НАСТРОЙКИ BALIFORUM ===
BALIFORUM_BASE_URL=https://baliforum.ru
BALIFORUM_LIST_URL=https://baliforum.ru/events
BALIFORUM_MAX_EVENTS=100
BALIFORUM_REQUESTS_PER_SEC=1

# === НАСТРОЙКИ KUDAGO ===
KUDAGO_DRY_RUN=false
KUDAGO_RPS=3
KUDAGO_TIMEOUT_S=8
KUDAGO_PAGE_SIZE=100
TODAY_MAX_EVENTS=60
TODAY_SHOW_TOP=12
CACHE_TTL_S=300

# === ОСНОВНЫЕ НАСТРОЙКИ ===
DATABASE_URL=postgresql+psycopg2://user:password@localhost:5432/event_bot
TELEGRAM_TOKEN=your_telegram_bot_token_here
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# === AI НАСТРОЙКИ (опционально) ===
OPENAI_API_KEY=your_openai_api_key_here
AI_PARSE_ENABLE=0
AI_GENERATE_SYNTHETIC=0
STRICT_SOURCE_ONLY=1
```

## 🏗️ Архитектура с упрощенными источниками

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   🌴 BaliForum  │    │   🎭 KudaGo     │    │  👥 Пользователи │
│   (Бали)        │    │   (Россия)      │    │  (Создание)     │
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          ▼                      ▼                      ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ events_parser   │    │ events_parser   │    │ events_user     │
│ source='baliforum'│   │ source='kudago' │   │ (пользовательские)│
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          └──────────────────────┼──────────────────────┘
                                 ▼
                    ┌─────────────────┐
                    │     events      │
                    │  (единая таблица)│
                    └─────────┬───────┘
                              │
                              ▼
                    ┌─────────────────┐
                    │  Telegram Bot   │
                    │  (поиск событий)│
                    └─────────────────┘
```

## 📊 Преимущества упрощенной архитектуры

✅ **Фокус на качестве** - только проверенные источники
✅ **Простота поддержки** - меньше интеграций для мониторинга  
✅ **Быстрая разработка** - можно сосредоточиться на улучшении существующих функций
✅ **Стабильность** - меньше точек отказа
✅ **Понятность** - проще объяснить пользователям откуда берутся события

## 🔧 Что нужно сделать

1. **Обновить `.env.local`** с настройками выше
2. **Перезапустить бота** для применения изменений
3. **Проверить работу** всех трех источников
4. **Удалить неиспользуемый код** (опционально, для чистоты)

## 🧪 Тестирование

```bash
# Тест BaliForum
python test_baliforum_simple.py

# Тест KudaGo  
python -c "from sources.kudago_source import KudaGoSource; print('KudaGo готов')"

# Тест пользовательских событий
# Создать событие через бота командой /create_event
```

## 📈 Мониторинг

Проверяйте логи на наличие:
- `🌴 BaliForum: включен` 
- `🎭 KudaGo: включен`
- `👥 Пользовательские события: работают`

---

**Готово! Теперь у нас простая и эффективная система с тремя надежными источниками событий! 🚀**
