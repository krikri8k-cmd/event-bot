# –û—Ç—á–µ—Ç: –§–∏—á–µ-—Ñ–ª–∞–≥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Meetup

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **–°–æ–∑–¥–∞–Ω api/config.py** —Å —Ñ–∏—á–µ-—Ñ–ª–∞–≥–∞–º–∏
   - `MEETUP_ENABLED=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–≤—ã–∫–ª—é—á–µ–Ω–æ)
   - `MEETUP_MOCK=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ OAuth –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

2. **–û–±–Ω–æ–≤–ª–µ–Ω .env.local.template**
   - –î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ Meetup —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Meetup –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

3. **–û–±–Ω–æ–≤–ª–µ–Ω api/app.py**
   - –£—Å–ª–æ–≤–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Meetup —Ä–æ—É—Ç–æ–≤ —á–µ—Ä–µ–∑ `if settings.MEETUP_ENABLED`
   - OAuth –∫–æ–ª–±—ç–∫ –∏ sync —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–ª–∞–≥–µ
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω –º–æ–∫-—Ä–µ–∂–∏–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–±—ç–∫–∞

4. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã Meetup**
   - –í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ–º–µ—á–µ–Ω—ã –º–∞—Ä–∫–µ—Ä–æ–º `pytest.mark.meetup`
   - –£—Å–ª–æ–≤–Ω—ã–π skip –ø—Ä–∏ `MEETUP_ENABLED != "1"`
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã: `test_oauth_meetup_*.py`

5. **–û–±–Ω–æ–≤–ª–µ–Ω pyproject.toml**
   - –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä–∫–µ—Ä `meetup: tests that require Meetup enabled`

6. **–û–±–Ω–æ–≤–ª–µ–Ω README.md**
   - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "Meetup (—Ñ–∏—á–µ-—Ñ–ª–∞–≥)"
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–∫–ª—é—á–µ–Ω–∏—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### –í `api/config.py`:
```python
# –§–∏—á–µ-—Ñ–ª–∞–≥ Meetup (–í–´–ö–õ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
MEETUP_ENABLED = os.getenv("MEETUP_ENABLED", "0") == "1"

# –ú–æ–∫-—Ä–µ–∂–∏–º –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
MEETUP_MOCK = os.getenv("MEETUP_MOCK", "0") == "1"

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è OAuth-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–ª–∞–≥–µ)
MEETUP_CLIENT_ID = os.getenv("MEETUP_CLIENT_ID")
MEETUP_CLIENT_SECRET = os.getenv("MEETUP_CLIENT_SECRET")
MEETUP_REDIRECT_URI = os.getenv("MEETUP_REDIRECT_URI", "http://localhost:8000/oauth/meetup/callback")
```

#### –í `api/app.py`:
```python
# Meetup OAuth —Ä–æ—É—Ç–µ—Ä (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
if settings.MEETUP_ENABLED:
    oauth_router = APIRouter(prefix="/oauth/meetup", tags=["oauth"])
    
    @oauth_router.get("/callback")
    async def meetup_callback(...):
        # –ú–æ–∫-—Ä–µ–∂–∏–º –¥–ª—è –ª–æ–∫–∞–ª–∫–∏/—Ç–µ—Å—Ç–æ–≤
        if settings.MEETUP_MOCK:
            return {"ok": True, "code": code, "state": state, "mock": True}
        # –ë–æ–µ–≤–æ–π –ø—É—Ç—å: –æ–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω—ã
        ...

    # –ü–æ–¥–∫–ª—é—á–∞–µ–º OAuth —Ä–æ—É—Ç–µ—Ä
    app.include_router(oauth_router)

# Meetup sync endpoint (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
if settings.MEETUP_ENABLED:
    @app.post("/events/sources/meetup/sync")
    async def sync_meetup(...):
        ...
```

#### –í —Ç–µ—Å—Ç–∞—Ö:
```python
pytestmark = [
    pytest.mark.api,
    pytest.mark.meetup,
    pytest.mark.skipif(os.getenv("MEETUP_ENABLED") != "1", reason="Meetup disabled"),
]
```

### Acceptance Criteria - –ü—Ä–æ–≤–µ—Ä–∫–∞

#### ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (`MEETUP_ENABLED=0`):
- **`GET /oauth/meetup/callback` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `404 Not Found`**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
- **–í—Å–µ meetup-—Ç–µ—Å—Ç—ã skipped**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

#### ‚úÖ –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ (`MEETUP_ENABLED=1`):
- **`GET /oauth/meetup/callback?code=test123&state=xyz` —Ä–∞–±–æ—Ç–∞–µ—Ç**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
- **–ú–æ–∫-—Ä–µ–∂–∏–º `MEETUP_MOCK=1` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"ok": true, "mock": true, ...}`**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
- **–ë–æ–µ–≤–æ–π —Ä–µ–∂–∏–º –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–º–µ–Ω—è—Ç—å code –Ω–∞ —Ç–æ–∫–µ–Ω—ã**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–≤—ã–∫–ª—é—á–µ–Ω–æ)
uvicorn api.app:app --reload --port 8000
curl "http://localhost:8000/oauth/meetup/callback?code=test123&state=xyz"
# –û—Ç–≤–µ—Ç: {"detail":"Not Found"} (404)

# –í–∫–ª—é—á–µ–Ω–æ —Å –º–æ–∫-—Ä–µ–∂–∏–º–æ–º
export MEETUP_ENABLED=1
export MEETUP_MOCK=1
uvicorn api.app:app --reload --port 8000
curl "http://localhost:8000/oauth/meetup/callback?code=test123&state=xyz"
# –û—Ç–≤–µ—Ç: {"ok":true,"code":"test123","state":"xyz","mock":true}
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
```bash
# –ë–µ–∑ MEETUP_ENABLED - –≤—Å–µ —Ç–µ—Å—Ç—ã skipped
pytest tests/test_oauth_meetup_*.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ —Ç–µ—Å—Ç—ã SKIPPED (Meetup disabled)

# –° MEETUP_ENABLED=1 - —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
export MEETUP_ENABLED=1
pytest tests/test_oauth_meetup_*.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ë–î)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é:**

1. **–§–∏—á–µ-—Ñ–ª–∞–≥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** - `MEETUP_ENABLED=0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —É—Å–ª–æ–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–ª–∞–≥–µ
3. **–ú–æ–∫-—Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–±—ç–∫–∞ –ø—Ä–∏ `MEETUP_MOCK=1`
4. **–¢–µ—Å—Ç—ã —É—Å–ª–æ–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è** - –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–ª–∞–≥–µ
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–∫–ª—é—á–µ–Ω–∏—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∞** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞–º–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –í–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Meetup:
```bash
# .env.local
MEETUP_ENABLED=1
MEETUP_CLIENT_ID=your_client_id
MEETUP_CLIENT_SECRET=your_client_secret
```

#### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–º–æ–∫-—Ä–µ–∂–∏–º):
```bash
# .env.local
MEETUP_ENABLED=1
MEETUP_MOCK=1
```

#### –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/oauth/meetup/*` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (404)
- –í—Å–µ —Ç–µ—Å—Ç—ã Meetup –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- CI –æ—Å—Ç–∞–µ—Ç—Å—è –∑–µ–ª–µ–Ω—ã–º

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Meetup —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ñ–∏—á–µ-—Ñ–ª–∞–≥–æ–º –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω–∞! üéâ
