# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–Ω–æ–ø–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–µ–ª –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–æ–±—ã—Ç–∏–π. –ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç –∏–ª–∏ –∏—Ö –º–∞–ª–æ), –Ω–æ –Ω–µ –≤ –æ–±—ã—á–Ω–æ–º —Å–ø–∏—Å–∫–µ —Å–æ–±—ã—Ç–∏–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `kb_pager`
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `current_radius`** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–¥–∏—É—Å–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** –µ—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —Ä–∞–¥–∏—É—Å –º–µ–Ω—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞** –∫–æ–≥–¥–∞ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ä–∞–¥–∏—É—Å

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- ‚úÖ **`send_compact_events_list`** - –ø–µ—Ä–µ–¥–∞–µ—Ç —Ä–∞–¥–∏—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `kb_pager`
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–¥–∏—É—Å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞** - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–∞–¥–∏—É—Å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

### üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–†–∞–¥–∏—É—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** –≤ `user_state` –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ **–†–∞–¥–∏—É—Å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–¥–∏—É—Å–∞

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ö–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è:
1. **–í –æ–±—ã—á–Ω–æ–º —Å–ø–∏—Å–∫–µ —Å–æ–±—ã—Ç–∏–π** - –≤—Å–µ–≥–¥–∞, –µ—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å
2. **–ü—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏** - –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
3. **–ö–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç** - –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
4. **–ö–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–π –º–∞–ª–æ** - –¥–ª—è –ø–æ–∏—Å–∫–∞ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

### ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
- **–¢–µ–∫—É—â–∏–π —Ä–∞–¥–∏—É—Å 5 –∫–º** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üîç –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ 10 –∫–º", "üîç –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ 15 –∫–º"
- **–¢–µ–∫—É—â–∏–π —Ä–∞–¥–∏—É—Å 10 –∫–º** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üîç –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ 15 –∫–º"
- **–¢–µ–∫—É—â–∏–π —Ä–∞–¥–∏—É—Å 15 –∫–º** ‚Üí –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–¥–∏—É—Å)

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–¥–∏—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (5/10/15 –∫–º)
- **–£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** `RADIUS_STEP_KM` –∏ `MAX_RADIUS_KM`
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–¥–∏—É—Å** –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```python
def kb_pager(page: int, total: int, current_radius: int = None) -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞"""

async def send_compact_events_list(
    message: types.Message, events: list, user_lat: float, user_lng: float, 
    page: int = 0, user_radius: float = None
):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –≤ HTML —Ñ–æ—Ä–º–∞—Ç–µ"""
```

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```python
user_state[message.chat.id] = {
    "prepared": prepared,
    "counts": counts,
    "lat": user_lat,
    "lng": user_lng,
    "radius": int(user_radius),  # ‚Üê –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–¥–∏—É—Å
    "page": 1,
    "diag": diag,
}
```

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–¥–∏—É—Å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞** - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–∞–¥–∏—É—Å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- **–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–¥–∏—É—Å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ö–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞!**

### üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- **–†–∞–Ω—å—à–µ**: –ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç –∏–ª–∏ –∏—Ö –º–∞–ª–æ
- **–¢–µ–ø–µ—Ä—å**: –ö–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞, –∫–æ–≥–¥–∞ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ä–∞–¥–∏—É—Å

### ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç:
1. **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–æ–±—ã—Ç–∏–π** - –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞
2. **–ü—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏** - –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
3. **–ü—Ä–∏ –º–∞–ª–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–æ–±—ã—Ç–∏–π** - –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞
4. **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–±—ã—Ç–∏–π** - –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- **–° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ä–∞–¥–∏—É—Å–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ä–∞–¥–∏—É—Å
- **–° –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π** - –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- **–° —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** - —Ä–∞–¥–∏—É—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞
2. **–ù–∞–∂–∞—Ç—å "–í–ø–µ—Ä—ë–¥"** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å
3. **–ù–∞–∂–∞—Ç—å "üîç –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ 10 –∫–º"** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–¥–∏—É—Å —É–≤–µ–ª–∏—á–∏–ª—Å—è
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é** ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –µ—Å—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 2024*  
*–ê–Ω–∏–º–µ-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∞: –ö–Ω–æ–ø–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ! (‚óï‚Äø‚óï)‚ú®*
